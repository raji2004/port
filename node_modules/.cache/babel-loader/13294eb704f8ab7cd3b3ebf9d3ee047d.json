{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\n\nvar SubjectSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(SubjectSubscriber, _super);\n\n  function SubjectSubscriber(destination) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.destination = destination;\n    return _this;\n  }\n\n  return SubjectSubscriber;\n}(Subscriber);\n\nexport { SubjectSubscriber };\n\nvar Subject = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(Subject, _super);\n\n  function Subject() {\n    var _this = _super.call(this) || this;\n\n    _this.observers = [];\n    _this.closed = false;\n    _this.isStopped = false;\n    _this.hasError = false;\n    _this.thrownError = null;\n    return _this;\n  }\n\n  Subject.prototype[rxSubscriberSymbol] = function () {\n    return new SubjectSubscriber(this);\n  };\n\n  Subject.prototype.lift = function (operator) {\n    var subject = new AnonymousSubject(this, this);\n    subject.operator = operator;\n    return subject;\n  };\n\n  Subject.prototype.next = function (value) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n\n    if (!this.isStopped) {\n      var observers = this.observers;\n      var len = observers.length;\n      var copy = observers.slice();\n\n      for (var i = 0; i < len; i++) {\n        copy[i].next(value);\n      }\n    }\n  };\n\n  Subject.prototype.error = function (err) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n\n    this.hasError = true;\n    this.thrownError = err;\n    this.isStopped = true;\n    var observers = this.observers;\n    var len = observers.length;\n    var copy = observers.slice();\n\n    for (var i = 0; i < len; i++) {\n      copy[i].error(err);\n    }\n\n    this.observers.length = 0;\n  };\n\n  Subject.prototype.complete = function () {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n\n    this.isStopped = true;\n    var observers = this.observers;\n    var len = observers.length;\n    var copy = observers.slice();\n\n    for (var i = 0; i < len; i++) {\n      copy[i].complete();\n    }\n\n    this.observers.length = 0;\n  };\n\n  Subject.prototype.unsubscribe = function () {\n    this.isStopped = true;\n    this.closed = true;\n    this.observers = null;\n  };\n\n  Subject.prototype._trySubscribe = function (subscriber) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else {\n      return _super.prototype._trySubscribe.call(this, subscriber);\n    }\n  };\n\n  Subject.prototype._subscribe = function (subscriber) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else if (this.hasError) {\n      subscriber.error(this.thrownError);\n      return Subscription.EMPTY;\n    } else if (this.isStopped) {\n      subscriber.complete();\n      return Subscription.EMPTY;\n    } else {\n      this.observers.push(subscriber);\n      return new SubjectSubscription(this, subscriber);\n    }\n  };\n\n  Subject.prototype.asObservable = function () {\n    var observable = new Observable();\n    observable.source = this;\n    return observable;\n  };\n\n  Subject.create = function (destination, source) {\n    return new AnonymousSubject(destination, source);\n  };\n\n  return Subject;\n}(Observable);\n\nexport { Subject };\n\nvar AnonymousSubject = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(AnonymousSubject, _super);\n\n  function AnonymousSubject(destination, source) {\n    var _this = _super.call(this) || this;\n\n    _this.destination = destination;\n    _this.source = source;\n    return _this;\n  }\n\n  AnonymousSubject.prototype.next = function (value) {\n    var destination = this.destination;\n\n    if (destination && destination.next) {\n      destination.next(value);\n    }\n  };\n\n  AnonymousSubject.prototype.error = function (err) {\n    var destination = this.destination;\n\n    if (destination && destination.error) {\n      this.destination.error(err);\n    }\n  };\n\n  AnonymousSubject.prototype.complete = function () {\n    var destination = this.destination;\n\n    if (destination && destination.complete) {\n      this.destination.complete();\n    }\n  };\n\n  AnonymousSubject.prototype._subscribe = function (subscriber) {\n    var source = this.source;\n\n    if (source) {\n      return this.source.subscribe(subscriber);\n    } else {\n      return Subscription.EMPTY;\n    }\n  };\n\n  return AnonymousSubject;\n}(Subject);\n\nexport { AnonymousSubject };","map":{"version":3,"sources":["../../src/internal/Subject.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\r\nimport * as tslib_1 from \"tslib\";\r\nimport { Observable } from './Observable';\r\nimport { Subscriber } from './Subscriber';\r\nimport { Subscription } from './Subscription';\r\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\r\nimport { SubjectSubscription } from './SubjectSubscription';\r\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\r\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(SubjectSubscriber, _super);\r\n    function SubjectSubscriber(destination) {\r\n        var _this = _super.call(this, destination) || this;\r\n        _this.destination = destination;\r\n        return _this;\r\n    }\r\n    return SubjectSubscriber;\r\n}(Subscriber));\r\nexport { SubjectSubscriber };\r\nvar Subject = /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(Subject, _super);\r\n    function Subject() {\r\n        var _this = _super.call(this) || this;\r\n        _this.observers = [];\r\n        _this.closed = false;\r\n        _this.isStopped = false;\r\n        _this.hasError = false;\r\n        _this.thrownError = null;\r\n        return _this;\r\n    }\r\n    Subject.prototype[rxSubscriberSymbol] = function () {\r\n        return new SubjectSubscriber(this);\r\n    };\r\n    Subject.prototype.lift = function (operator) {\r\n        var subject = new AnonymousSubject(this, this);\r\n        subject.operator = operator;\r\n        return subject;\r\n    };\r\n    Subject.prototype.next = function (value) {\r\n        if (this.closed) {\r\n            throw new ObjectUnsubscribedError();\r\n        }\r\n        if (!this.isStopped) {\r\n            var observers = this.observers;\r\n            var len = observers.length;\r\n            var copy = observers.slice();\r\n            for (var i = 0; i < len; i++) {\r\n                copy[i].next(value);\r\n            }\r\n        }\r\n    };\r\n    Subject.prototype.error = function (err) {\r\n        if (this.closed) {\r\n            throw new ObjectUnsubscribedError();\r\n        }\r\n        this.hasError = true;\r\n        this.thrownError = err;\r\n        this.isStopped = true;\r\n        var observers = this.observers;\r\n        var len = observers.length;\r\n        var copy = observers.slice();\r\n        for (var i = 0; i < len; i++) {\r\n            copy[i].error(err);\r\n        }\r\n        this.observers.length = 0;\r\n    };\r\n    Subject.prototype.complete = function () {\r\n        if (this.closed) {\r\n            throw new ObjectUnsubscribedError();\r\n        }\r\n        this.isStopped = true;\r\n        var observers = this.observers;\r\n        var len = observers.length;\r\n        var copy = observers.slice();\r\n        for (var i = 0; i < len; i++) {\r\n            copy[i].complete();\r\n        }\r\n        this.observers.length = 0;\r\n    };\r\n    Subject.prototype.unsubscribe = function () {\r\n        this.isStopped = true;\r\n        this.closed = true;\r\n        this.observers = null;\r\n    };\r\n    Subject.prototype._trySubscribe = function (subscriber) {\r\n        if (this.closed) {\r\n            throw new ObjectUnsubscribedError();\r\n        }\r\n        else {\r\n            return _super.prototype._trySubscribe.call(this, subscriber);\r\n        }\r\n    };\r\n    Subject.prototype._subscribe = function (subscriber) {\r\n        if (this.closed) {\r\n            throw new ObjectUnsubscribedError();\r\n        }\r\n        else if (this.hasError) {\r\n            subscriber.error(this.thrownError);\r\n            return Subscription.EMPTY;\r\n        }\r\n        else if (this.isStopped) {\r\n            subscriber.complete();\r\n            return Subscription.EMPTY;\r\n        }\r\n        else {\r\n            this.observers.push(subscriber);\r\n            return new SubjectSubscription(this, subscriber);\r\n        }\r\n    };\r\n    Subject.prototype.asObservable = function () {\r\n        var observable = new Observable();\r\n        observable.source = this;\r\n        return observable;\r\n    };\r\n    Subject.create = function (destination, source) {\r\n        return new AnonymousSubject(destination, source);\r\n    };\r\n    return Subject;\r\n}(Observable));\r\nexport { Subject };\r\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(AnonymousSubject, _super);\r\n    function AnonymousSubject(destination, source) {\r\n        var _this = _super.call(this) || this;\r\n        _this.destination = destination;\r\n        _this.source = source;\r\n        return _this;\r\n    }\r\n    AnonymousSubject.prototype.next = function (value) {\r\n        var destination = this.destination;\r\n        if (destination && destination.next) {\r\n            destination.next(value);\r\n        }\r\n    };\r\n    AnonymousSubject.prototype.error = function (err) {\r\n        var destination = this.destination;\r\n        if (destination && destination.error) {\r\n            this.destination.error(err);\r\n        }\r\n    };\r\n    AnonymousSubject.prototype.complete = function () {\r\n        var destination = this.destination;\r\n        if (destination && destination.complete) {\r\n            this.destination.complete();\r\n        }\r\n    };\r\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\r\n        var source = this.source;\r\n        if (source) {\r\n            return this.source.subscribe(subscriber);\r\n        }\r\n        else {\r\n            return Subscription.EMPTY;\r\n        }\r\n    };\r\n    return AnonymousSubject;\r\n}(Subject));\r\nexport { AnonymousSubject };\r\n//# sourceMappingURL=Subject.js.map\r\n"]},"metadata":{},"sourceType":"module"}