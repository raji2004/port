{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_fromArray,_util_isArray,_Subscriber,_.._internal_symbol_iterator,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { fromArray } from './fromArray';\nimport { isArray } from '../util/isArray';\nimport { Subscriber } from '../Subscriber';\nimport { iterator as Symbol_iterator } from '../../internal/symbol/iterator';\nimport { SimpleOuterSubscriber, SimpleInnerSubscriber, innerSubscribe } from '../innerSubscribe';\nexport function zip() {\n  var observables = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n\n  var resultSelector = observables[observables.length - 1];\n\n  if (typeof resultSelector === 'function') {\n    observables.pop();\n  }\n\n  return fromArray(observables, undefined).lift(new ZipOperator(resultSelector));\n}\n\nvar ZipOperator = /*@__PURE__*/function () {\n  function ZipOperator(resultSelector) {\n    this.resultSelector = resultSelector;\n  }\n\n  ZipOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new ZipSubscriber(subscriber, this.resultSelector));\n  };\n\n  return ZipOperator;\n}();\n\nexport { ZipOperator };\n\nvar ZipSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(ZipSubscriber, _super);\n\n  function ZipSubscriber(destination, resultSelector, values) {\n    if (values === void 0) {\n      values = Object.create(null);\n    }\n\n    var _this = _super.call(this, destination) || this;\n\n    _this.resultSelector = resultSelector;\n    _this.iterators = [];\n    _this.active = 0;\n    _this.resultSelector = typeof resultSelector === 'function' ? resultSelector : undefined;\n    return _this;\n  }\n\n  ZipSubscriber.prototype._next = function (value) {\n    var iterators = this.iterators;\n\n    if (isArray(value)) {\n      iterators.push(new StaticArrayIterator(value));\n    } else if (typeof value[Symbol_iterator] === 'function') {\n      iterators.push(new StaticIterator(value[Symbol_iterator]()));\n    } else {\n      iterators.push(new ZipBufferIterator(this.destination, this, value));\n    }\n  };\n\n  ZipSubscriber.prototype._complete = function () {\n    var iterators = this.iterators;\n    var len = iterators.length;\n    this.unsubscribe();\n\n    if (len === 0) {\n      this.destination.complete();\n      return;\n    }\n\n    this.active = len;\n\n    for (var i = 0; i < len; i++) {\n      var iterator = iterators[i];\n\n      if (iterator.stillUnsubscribed) {\n        var destination = this.destination;\n        destination.add(iterator.subscribe());\n      } else {\n        this.active--;\n      }\n    }\n  };\n\n  ZipSubscriber.prototype.notifyInactive = function () {\n    this.active--;\n\n    if (this.active === 0) {\n      this.destination.complete();\n    }\n  };\n\n  ZipSubscriber.prototype.checkIterators = function () {\n    var iterators = this.iterators;\n    var len = iterators.length;\n    var destination = this.destination;\n\n    for (var i = 0; i < len; i++) {\n      var iterator = iterators[i];\n\n      if (typeof iterator.hasValue === 'function' && !iterator.hasValue()) {\n        return;\n      }\n    }\n\n    var shouldComplete = false;\n    var args = [];\n\n    for (var i = 0; i < len; i++) {\n      var iterator = iterators[i];\n      var result = iterator.next();\n\n      if (iterator.hasCompleted()) {\n        shouldComplete = true;\n      }\n\n      if (result.done) {\n        destination.complete();\n        return;\n      }\n\n      args.push(result.value);\n    }\n\n    if (this.resultSelector) {\n      this._tryresultSelector(args);\n    } else {\n      destination.next(args);\n    }\n\n    if (shouldComplete) {\n      destination.complete();\n    }\n  };\n\n  ZipSubscriber.prototype._tryresultSelector = function (args) {\n    var result;\n\n    try {\n      result = this.resultSelector.apply(this, args);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n\n    this.destination.next(result);\n  };\n\n  return ZipSubscriber;\n}(Subscriber);\n\nexport { ZipSubscriber };\n\nvar StaticIterator = /*@__PURE__*/function () {\n  function StaticIterator(iterator) {\n    this.iterator = iterator;\n    this.nextResult = iterator.next();\n  }\n\n  StaticIterator.prototype.hasValue = function () {\n    return true;\n  };\n\n  StaticIterator.prototype.next = function () {\n    var result = this.nextResult;\n    this.nextResult = this.iterator.next();\n    return result;\n  };\n\n  StaticIterator.prototype.hasCompleted = function () {\n    var nextResult = this.nextResult;\n    return Boolean(nextResult && nextResult.done);\n  };\n\n  return StaticIterator;\n}();\n\nvar StaticArrayIterator = /*@__PURE__*/function () {\n  function StaticArrayIterator(array) {\n    this.array = array;\n    this.index = 0;\n    this.length = 0;\n    this.length = array.length;\n  }\n\n  StaticArrayIterator.prototype[Symbol_iterator] = function () {\n    return this;\n  };\n\n  StaticArrayIterator.prototype.next = function (value) {\n    var i = this.index++;\n    var array = this.array;\n    return i < this.length ? {\n      value: array[i],\n      done: false\n    } : {\n      value: null,\n      done: true\n    };\n  };\n\n  StaticArrayIterator.prototype.hasValue = function () {\n    return this.array.length > this.index;\n  };\n\n  StaticArrayIterator.prototype.hasCompleted = function () {\n    return this.array.length === this.index;\n  };\n\n  return StaticArrayIterator;\n}();\n\nvar ZipBufferIterator = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(ZipBufferIterator, _super);\n\n  function ZipBufferIterator(destination, parent, observable) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.parent = parent;\n    _this.observable = observable;\n    _this.stillUnsubscribed = true;\n    _this.buffer = [];\n    _this.isComplete = false;\n    return _this;\n  }\n\n  ZipBufferIterator.prototype[Symbol_iterator] = function () {\n    return this;\n  };\n\n  ZipBufferIterator.prototype.next = function () {\n    var buffer = this.buffer;\n\n    if (buffer.length === 0 && this.isComplete) {\n      return {\n        value: null,\n        done: true\n      };\n    } else {\n      return {\n        value: buffer.shift(),\n        done: false\n      };\n    }\n  };\n\n  ZipBufferIterator.prototype.hasValue = function () {\n    return this.buffer.length > 0;\n  };\n\n  ZipBufferIterator.prototype.hasCompleted = function () {\n    return this.buffer.length === 0 && this.isComplete;\n  };\n\n  ZipBufferIterator.prototype.notifyComplete = function () {\n    if (this.buffer.length > 0) {\n      this.isComplete = true;\n      this.parent.notifyInactive();\n    } else {\n      this.destination.complete();\n    }\n  };\n\n  ZipBufferIterator.prototype.notifyNext = function (innerValue) {\n    this.buffer.push(innerValue);\n    this.parent.checkIterators();\n  };\n\n  ZipBufferIterator.prototype.subscribe = function () {\n    return innerSubscribe(this.observable, new SimpleInnerSubscriber(this));\n  };\n\n  return ZipBufferIterator;\n}(SimpleOuterSubscriber);","map":{"version":3,"sources":["../../../src/internal/observable/zip.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START tslib,_fromArray,_util_isArray,_Subscriber,_.._internal_symbol_iterator,_innerSubscribe PURE_IMPORTS_END */\r\nimport * as tslib_1 from \"tslib\";\r\nimport { fromArray } from './fromArray';\r\nimport { isArray } from '../util/isArray';\r\nimport { Subscriber } from '../Subscriber';\r\nimport { iterator as Symbol_iterator } from '../../internal/symbol/iterator';\r\nimport { SimpleOuterSubscriber, SimpleInnerSubscriber, innerSubscribe } from '../innerSubscribe';\r\nexport function zip() {\r\n    var observables = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        observables[_i] = arguments[_i];\r\n    }\r\n    var resultSelector = observables[observables.length - 1];\r\n    if (typeof resultSelector === 'function') {\r\n        observables.pop();\r\n    }\r\n    return fromArray(observables, undefined).lift(new ZipOperator(resultSelector));\r\n}\r\nvar ZipOperator = /*@__PURE__*/ (function () {\r\n    function ZipOperator(resultSelector) {\r\n        this.resultSelector = resultSelector;\r\n    }\r\n    ZipOperator.prototype.call = function (subscriber, source) {\r\n        return source.subscribe(new ZipSubscriber(subscriber, this.resultSelector));\r\n    };\r\n    return ZipOperator;\r\n}());\r\nexport { ZipOperator };\r\nvar ZipSubscriber = /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(ZipSubscriber, _super);\r\n    function ZipSubscriber(destination, resultSelector, values) {\r\n        if (values === void 0) {\r\n            values = Object.create(null);\r\n        }\r\n        var _this = _super.call(this, destination) || this;\r\n        _this.resultSelector = resultSelector;\r\n        _this.iterators = [];\r\n        _this.active = 0;\r\n        _this.resultSelector = (typeof resultSelector === 'function') ? resultSelector : undefined;\r\n        return _this;\r\n    }\r\n    ZipSubscriber.prototype._next = function (value) {\r\n        var iterators = this.iterators;\r\n        if (isArray(value)) {\r\n            iterators.push(new StaticArrayIterator(value));\r\n        }\r\n        else if (typeof value[Symbol_iterator] === 'function') {\r\n            iterators.push(new StaticIterator(value[Symbol_iterator]()));\r\n        }\r\n        else {\r\n            iterators.push(new ZipBufferIterator(this.destination, this, value));\r\n        }\r\n    };\r\n    ZipSubscriber.prototype._complete = function () {\r\n        var iterators = this.iterators;\r\n        var len = iterators.length;\r\n        this.unsubscribe();\r\n        if (len === 0) {\r\n            this.destination.complete();\r\n            return;\r\n        }\r\n        this.active = len;\r\n        for (var i = 0; i < len; i++) {\r\n            var iterator = iterators[i];\r\n            if (iterator.stillUnsubscribed) {\r\n                var destination = this.destination;\r\n                destination.add(iterator.subscribe());\r\n            }\r\n            else {\r\n                this.active--;\r\n            }\r\n        }\r\n    };\r\n    ZipSubscriber.prototype.notifyInactive = function () {\r\n        this.active--;\r\n        if (this.active === 0) {\r\n            this.destination.complete();\r\n        }\r\n    };\r\n    ZipSubscriber.prototype.checkIterators = function () {\r\n        var iterators = this.iterators;\r\n        var len = iterators.length;\r\n        var destination = this.destination;\r\n        for (var i = 0; i < len; i++) {\r\n            var iterator = iterators[i];\r\n            if (typeof iterator.hasValue === 'function' && !iterator.hasValue()) {\r\n                return;\r\n            }\r\n        }\r\n        var shouldComplete = false;\r\n        var args = [];\r\n        for (var i = 0; i < len; i++) {\r\n            var iterator = iterators[i];\r\n            var result = iterator.next();\r\n            if (iterator.hasCompleted()) {\r\n                shouldComplete = true;\r\n            }\r\n            if (result.done) {\r\n                destination.complete();\r\n                return;\r\n            }\r\n            args.push(result.value);\r\n        }\r\n        if (this.resultSelector) {\r\n            this._tryresultSelector(args);\r\n        }\r\n        else {\r\n            destination.next(args);\r\n        }\r\n        if (shouldComplete) {\r\n            destination.complete();\r\n        }\r\n    };\r\n    ZipSubscriber.prototype._tryresultSelector = function (args) {\r\n        var result;\r\n        try {\r\n            result = this.resultSelector.apply(this, args);\r\n        }\r\n        catch (err) {\r\n            this.destination.error(err);\r\n            return;\r\n        }\r\n        this.destination.next(result);\r\n    };\r\n    return ZipSubscriber;\r\n}(Subscriber));\r\nexport { ZipSubscriber };\r\nvar StaticIterator = /*@__PURE__*/ (function () {\r\n    function StaticIterator(iterator) {\r\n        this.iterator = iterator;\r\n        this.nextResult = iterator.next();\r\n    }\r\n    StaticIterator.prototype.hasValue = function () {\r\n        return true;\r\n    };\r\n    StaticIterator.prototype.next = function () {\r\n        var result = this.nextResult;\r\n        this.nextResult = this.iterator.next();\r\n        return result;\r\n    };\r\n    StaticIterator.prototype.hasCompleted = function () {\r\n        var nextResult = this.nextResult;\r\n        return Boolean(nextResult && nextResult.done);\r\n    };\r\n    return StaticIterator;\r\n}());\r\nvar StaticArrayIterator = /*@__PURE__*/ (function () {\r\n    function StaticArrayIterator(array) {\r\n        this.array = array;\r\n        this.index = 0;\r\n        this.length = 0;\r\n        this.length = array.length;\r\n    }\r\n    StaticArrayIterator.prototype[Symbol_iterator] = function () {\r\n        return this;\r\n    };\r\n    StaticArrayIterator.prototype.next = function (value) {\r\n        var i = this.index++;\r\n        var array = this.array;\r\n        return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\r\n    };\r\n    StaticArrayIterator.prototype.hasValue = function () {\r\n        return this.array.length > this.index;\r\n    };\r\n    StaticArrayIterator.prototype.hasCompleted = function () {\r\n        return this.array.length === this.index;\r\n    };\r\n    return StaticArrayIterator;\r\n}());\r\nvar ZipBufferIterator = /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(ZipBufferIterator, _super);\r\n    function ZipBufferIterator(destination, parent, observable) {\r\n        var _this = _super.call(this, destination) || this;\r\n        _this.parent = parent;\r\n        _this.observable = observable;\r\n        _this.stillUnsubscribed = true;\r\n        _this.buffer = [];\r\n        _this.isComplete = false;\r\n        return _this;\r\n    }\r\n    ZipBufferIterator.prototype[Symbol_iterator] = function () {\r\n        return this;\r\n    };\r\n    ZipBufferIterator.prototype.next = function () {\r\n        var buffer = this.buffer;\r\n        if (buffer.length === 0 && this.isComplete) {\r\n            return { value: null, done: true };\r\n        }\r\n        else {\r\n            return { value: buffer.shift(), done: false };\r\n        }\r\n    };\r\n    ZipBufferIterator.prototype.hasValue = function () {\r\n        return this.buffer.length > 0;\r\n    };\r\n    ZipBufferIterator.prototype.hasCompleted = function () {\r\n        return this.buffer.length === 0 && this.isComplete;\r\n    };\r\n    ZipBufferIterator.prototype.notifyComplete = function () {\r\n        if (this.buffer.length > 0) {\r\n            this.isComplete = true;\r\n            this.parent.notifyInactive();\r\n        }\r\n        else {\r\n            this.destination.complete();\r\n        }\r\n    };\r\n    ZipBufferIterator.prototype.notifyNext = function (innerValue) {\r\n        this.buffer.push(innerValue);\r\n        this.parent.checkIterators();\r\n    };\r\n    ZipBufferIterator.prototype.subscribe = function () {\r\n        return innerSubscribe(this.observable, new SimpleInnerSubscriber(this));\r\n    };\r\n    return ZipBufferIterator;\r\n}(SimpleOuterSubscriber));\r\n//# sourceMappingURL=zip.js.map\r\n"]},"metadata":{},"sourceType":"module"}