{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\nvar Subscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(Subscriber, _super);\n\n  function Subscriber(destinationOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n\n    _this.syncErrorValue = null;\n    _this.syncErrorThrown = false;\n    _this.syncErrorThrowable = false;\n    _this.isStopped = false;\n\n    switch (arguments.length) {\n      case 0:\n        _this.destination = emptyObserver;\n        break;\n\n      case 1:\n        if (!destinationOrNext) {\n          _this.destination = emptyObserver;\n          break;\n        }\n\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            _this.destination = destinationOrNext;\n            destinationOrNext.add(_this);\n          } else {\n            _this.syncErrorThrowable = true;\n            _this.destination = new SafeSubscriber(_this, destinationOrNext);\n          }\n\n          break;\n        }\n\n      default:\n        _this.syncErrorThrowable = true;\n        _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n        break;\n    }\n\n    return _this;\n  }\n\n  Subscriber.prototype[rxSubscriberSymbol] = function () {\n    return this;\n  };\n\n  Subscriber.create = function (next, error, complete) {\n    var subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  };\n\n  Subscriber.prototype.next = function (value) {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  };\n\n  Subscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      this.isStopped = true;\n\n      this._error(err);\n    }\n  };\n\n  Subscriber.prototype.complete = function () {\n    if (!this.isStopped) {\n      this.isStopped = true;\n\n      this._complete();\n    }\n  };\n\n  Subscriber.prototype.unsubscribe = function () {\n    if (this.closed) {\n      return;\n    }\n\n    this.isStopped = true;\n\n    _super.prototype.unsubscribe.call(this);\n  };\n\n  Subscriber.prototype._next = function (value) {\n    this.destination.next(value);\n  };\n\n  Subscriber.prototype._error = function (err) {\n    this.destination.error(err);\n    this.unsubscribe();\n  };\n\n  Subscriber.prototype._complete = function () {\n    this.destination.complete();\n    this.unsubscribe();\n  };\n\n  Subscriber.prototype._unsubscribeAndRecycle = function () {\n    var _parentOrParents = this._parentOrParents;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  };\n\n  return Subscriber;\n}(Subscription);\n\nexport { Subscriber };\n\nvar SafeSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(SafeSubscriber, _super);\n\n  function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n\n    _this._parentSubscriber = _parentSubscriber;\n    var next;\n    var context = _this;\n\n    if (isFunction(observerOrNext)) {\n      next = observerOrNext;\n    } else if (observerOrNext) {\n      next = observerOrNext.next;\n      error = observerOrNext.error;\n      complete = observerOrNext.complete;\n\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n\n        if (isFunction(context.unsubscribe)) {\n          _this.add(context.unsubscribe.bind(context));\n        }\n\n        context.unsubscribe = _this.unsubscribe.bind(_this);\n      }\n    }\n\n    _this._context = context;\n    _this._next = next;\n    _this._error = error;\n    _this._complete = complete;\n    return _this;\n  }\n\n  SafeSubscriber.prototype.next = function (value) {\n    if (!this.isStopped && this._next) {\n      var _parentSubscriber = this._parentSubscriber;\n\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n      var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.complete = function () {\n    var _this = this;\n\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n\n      if (this._complete) {\n        var wrappedComplete = function () {\n          return _this._complete.call(_this._context);\n        };\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  SafeSubscriber.prototype._unsubscribe = function () {\n    var _parentSubscriber = this._parentSubscriber;\n    this._context = null;\n    this._parentSubscriber = null;\n\n    _parentSubscriber.unsubscribe();\n  };\n\n  return SafeSubscriber;\n}(Subscriber);\n\nexport { SafeSubscriber };","map":{"version":3,"sources":["../../src/internal/Subscriber.ts"],"names":[],"mappings":"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","sourcesContent":["/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\r\nimport * as tslib_1 from \"tslib\";\r\nimport { isFunction } from './util/isFunction';\r\nimport { empty as emptyObserver } from './Observer';\r\nimport { Subscription } from './Subscription';\r\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\r\nimport { config } from './config';\r\nimport { hostReportError } from './util/hostReportError';\r\nvar Subscriber = /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(Subscriber, _super);\r\n    function Subscriber(destinationOrNext, error, complete) {\r\n        var _this = _super.call(this) || this;\r\n        _this.syncErrorValue = null;\r\n        _this.syncErrorThrown = false;\r\n        _this.syncErrorThrowable = false;\r\n        _this.isStopped = false;\r\n        switch (arguments.length) {\r\n            case 0:\r\n                _this.destination = emptyObserver;\r\n                break;\r\n            case 1:\r\n                if (!destinationOrNext) {\r\n                    _this.destination = emptyObserver;\r\n                    break;\r\n                }\r\n                if (typeof destinationOrNext === 'object') {\r\n                    if (destinationOrNext instanceof Subscriber) {\r\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\r\n                        _this.destination = destinationOrNext;\r\n                        destinationOrNext.add(_this);\r\n                    }\r\n                    else {\r\n                        _this.syncErrorThrowable = true;\r\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\r\n                    }\r\n                    break;\r\n                }\r\n            default:\r\n                _this.syncErrorThrowable = true;\r\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\r\n                break;\r\n        }\r\n        return _this;\r\n    }\r\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\r\n    Subscriber.create = function (next, error, complete) {\r\n        var subscriber = new Subscriber(next, error, complete);\r\n        subscriber.syncErrorThrowable = false;\r\n        return subscriber;\r\n    };\r\n    Subscriber.prototype.next = function (value) {\r\n        if (!this.isStopped) {\r\n            this._next(value);\r\n        }\r\n    };\r\n    Subscriber.prototype.error = function (err) {\r\n        if (!this.isStopped) {\r\n            this.isStopped = true;\r\n            this._error(err);\r\n        }\r\n    };\r\n    Subscriber.prototype.complete = function () {\r\n        if (!this.isStopped) {\r\n            this.isStopped = true;\r\n            this._complete();\r\n        }\r\n    };\r\n    Subscriber.prototype.unsubscribe = function () {\r\n        if (this.closed) {\r\n            return;\r\n        }\r\n        this.isStopped = true;\r\n        _super.prototype.unsubscribe.call(this);\r\n    };\r\n    Subscriber.prototype._next = function (value) {\r\n        this.destination.next(value);\r\n    };\r\n    Subscriber.prototype._error = function (err) {\r\n        this.destination.error(err);\r\n        this.unsubscribe();\r\n    };\r\n    Subscriber.prototype._complete = function () {\r\n        this.destination.complete();\r\n        this.unsubscribe();\r\n    };\r\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\r\n        var _parentOrParents = this._parentOrParents;\r\n        this._parentOrParents = null;\r\n        this.unsubscribe();\r\n        this.closed = false;\r\n        this.isStopped = false;\r\n        this._parentOrParents = _parentOrParents;\r\n        return this;\r\n    };\r\n    return Subscriber;\r\n}(Subscription));\r\nexport { Subscriber };\r\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\r\n    tslib_1.__extends(SafeSubscriber, _super);\r\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\r\n        var _this = _super.call(this) || this;\r\n        _this._parentSubscriber = _parentSubscriber;\r\n        var next;\r\n        var context = _this;\r\n        if (isFunction(observerOrNext)) {\r\n            next = observerOrNext;\r\n        }\r\n        else if (observerOrNext) {\r\n            next = observerOrNext.next;\r\n            error = observerOrNext.error;\r\n            complete = observerOrNext.complete;\r\n            if (observerOrNext !== emptyObserver) {\r\n                context = Object.create(observerOrNext);\r\n                if (isFunction(context.unsubscribe)) {\r\n                    _this.add(context.unsubscribe.bind(context));\r\n                }\r\n                context.unsubscribe = _this.unsubscribe.bind(_this);\r\n            }\r\n        }\r\n        _this._context = context;\r\n        _this._next = next;\r\n        _this._error = error;\r\n        _this._complete = complete;\r\n        return _this;\r\n    }\r\n    SafeSubscriber.prototype.next = function (value) {\r\n        if (!this.isStopped && this._next) {\r\n            var _parentSubscriber = this._parentSubscriber;\r\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\r\n                this.__tryOrUnsub(this._next, value);\r\n            }\r\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\r\n                this.unsubscribe();\r\n            }\r\n        }\r\n    };\r\n    SafeSubscriber.prototype.error = function (err) {\r\n        if (!this.isStopped) {\r\n            var _parentSubscriber = this._parentSubscriber;\r\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\r\n            if (this._error) {\r\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\r\n                    this.__tryOrUnsub(this._error, err);\r\n                    this.unsubscribe();\r\n                }\r\n                else {\r\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\r\n                    this.unsubscribe();\r\n                }\r\n            }\r\n            else if (!_parentSubscriber.syncErrorThrowable) {\r\n                this.unsubscribe();\r\n                if (useDeprecatedSynchronousErrorHandling) {\r\n                    throw err;\r\n                }\r\n                hostReportError(err);\r\n            }\r\n            else {\r\n                if (useDeprecatedSynchronousErrorHandling) {\r\n                    _parentSubscriber.syncErrorValue = err;\r\n                    _parentSubscriber.syncErrorThrown = true;\r\n                }\r\n                else {\r\n                    hostReportError(err);\r\n                }\r\n                this.unsubscribe();\r\n            }\r\n        }\r\n    };\r\n    SafeSubscriber.prototype.complete = function () {\r\n        var _this = this;\r\n        if (!this.isStopped) {\r\n            var _parentSubscriber = this._parentSubscriber;\r\n            if (this._complete) {\r\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\r\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\r\n                    this.__tryOrUnsub(wrappedComplete);\r\n                    this.unsubscribe();\r\n                }\r\n                else {\r\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\r\n                    this.unsubscribe();\r\n                }\r\n            }\r\n            else {\r\n                this.unsubscribe();\r\n            }\r\n        }\r\n    };\r\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\r\n        try {\r\n            fn.call(this._context, value);\r\n        }\r\n        catch (err) {\r\n            this.unsubscribe();\r\n            if (config.useDeprecatedSynchronousErrorHandling) {\r\n                throw err;\r\n            }\r\n            else {\r\n                hostReportError(err);\r\n            }\r\n        }\r\n    };\r\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\r\n        if (!config.useDeprecatedSynchronousErrorHandling) {\r\n            throw new Error('bad call');\r\n        }\r\n        try {\r\n            fn.call(this._context, value);\r\n        }\r\n        catch (err) {\r\n            if (config.useDeprecatedSynchronousErrorHandling) {\r\n                parent.syncErrorValue = err;\r\n                parent.syncErrorThrown = true;\r\n                return true;\r\n            }\r\n            else {\r\n                hostReportError(err);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    SafeSubscriber.prototype._unsubscribe = function () {\r\n        var _parentSubscriber = this._parentSubscriber;\r\n        this._context = null;\r\n        this._parentSubscriber = null;\r\n        _parentSubscriber.unsubscribe();\r\n    };\r\n    return SafeSubscriber;\r\n}(Subscriber));\r\nexport { SafeSubscriber };\r\n//# sourceMappingURL=Subscriber.js.map\r\n"]},"metadata":{},"sourceType":"module"}