{"ast":null,"code":"/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nexport function timer(dueTime, periodOrScheduler, scheduler) {\n  if (dueTime === void 0) {\n    dueTime = 0;\n  }\n\n  var period = -1;\n\n  if (isNumeric(periodOrScheduler)) {\n    period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n  } else if (isScheduler(periodOrScheduler)) {\n    scheduler = periodOrScheduler;\n  }\n\n  if (!isScheduler(scheduler)) {\n    scheduler = async;\n  }\n\n  return new Observable(function (subscriber) {\n    var due = isNumeric(dueTime) ? dueTime : +dueTime - scheduler.now();\n    return scheduler.schedule(dispatch, due, {\n      index: 0,\n      period: period,\n      subscriber: subscriber\n    });\n  });\n}\n\nfunction dispatch(state) {\n  var index = state.index,\n      period = state.period,\n      subscriber = state.subscriber;\n  subscriber.next(index);\n\n  if (subscriber.closed) {\n    return;\n  } else if (period === -1) {\n    return subscriber.complete();\n  }\n\n  state.index = index + 1;\n  this.schedule(state, period);\n}","map":{"version":3,"sources":["../../../src/internal/observable/timer.ts"],"names":[],"mappings":"AAAA;AAEA,SAAS,UAAT,QAAsB,eAAtB;AACA,SAAS,KAAT,QAAoB,oBAApB;AACA,SAAS,SAAT,QAAsB,mBAAtB;AAqDA,SAAM,WAAN,QAAsB,qBAAtB;AAAsB,OAAA,SAAA,KAAA,CAAA,OAAA,EAAA,iBAAA,EAA0B,SAA1B,EAA0B;AAG9C,MAAI,OAAM,KAAM,KAAA,CAAhB,EAAgB;AACZ,IAAA,OAAA,GAAU,CAAV;AACF;;AACD,MAAA,MAAA,GAAA,CAAA,CAAA;;MAAM,SAAI,CAAA,iBAAA,C,EAAY;AACrB,IAAA,MAAA,GAAS,MAAG,CAAA,iBAAA,CAAH,GAA4B,CAA5B,IAA4B,CAA5B,IAA4B,MAAA,CAAA,iBAAA,CAArC;AACD,G,MAEI,IAAA,WAAY,CAAA,iBAAA,CAAZ,EAAwB;AAC3B,IAAA,SAAS,GAAG,iBAAZ;AACD;;AAED,MAAA,CAAA,WAAW,CAAA,SAAA,CAAX,EAAsB;AACpB,IAAA,SAAS,GAAG,KAAZ;AACE;;SACA,IAAG,UAAH,CAAc,UAAU,UAAV,EAAiB;AAEjC,QAAA,GAAO,GAAA,SAAU,CAAA,OAAA,CAAV,GACL,OADK,GAEJ,CAAA,OAAA,GAAA,SAAA,CAAA,GAAA,EAFH;AAGC,WAAA,SAAA,CAAA,QAAA,CAAA,QAAA,EAAA,GAAA,EAAA;AACJ,MAAA,KAAA,EAAA,CADI;AACJ,MAAA,MAAA,EAAA,MADI;AACJ,MAAA,UAAA,EAAA;AADI,KAAA,CAAA;AAUK,GAfJ,C;AAgBJ;;AAEA,SAAI,QAAJ,CAAc,KAAd,EAAqB;MACnB,KAAA,GAAO,KAAA,CAAA,K;MAAA,MAAA,GAAA,KAAA,CAAA,M;MAAA,UAAA,GAAA,KAAA,CAAA,U;AACR,EAAA,UAAA,CAAA,IAAA,CAAA,KAAA;;MAAM,UAAI,CAAM,M,EAAO;AACtB;AACD,G,MAEI,IAAC,MAAQ,KAAK,CAAA,CAAd,EAAmB;AACpB,WAAC,UAAgB,CAAA,QAAhB,EAAD;AACL","sourcesContent":["/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */\r\nimport { Observable } from '../Observable';\r\nimport { async } from '../scheduler/async';\r\nimport { isNumeric } from '../util/isNumeric';\r\nimport { isScheduler } from '../util/isScheduler';\r\nexport function timer(dueTime, periodOrScheduler, scheduler) {\r\n    if (dueTime === void 0) {\r\n        dueTime = 0;\r\n    }\r\n    var period = -1;\r\n    if (isNumeric(periodOrScheduler)) {\r\n        period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\r\n    }\r\n    else if (isScheduler(periodOrScheduler)) {\r\n        scheduler = periodOrScheduler;\r\n    }\r\n    if (!isScheduler(scheduler)) {\r\n        scheduler = async;\r\n    }\r\n    return new Observable(function (subscriber) {\r\n        var due = isNumeric(dueTime)\r\n            ? dueTime\r\n            : (+dueTime - scheduler.now());\r\n        return scheduler.schedule(dispatch, due, {\r\n            index: 0, period: period, subscriber: subscriber\r\n        });\r\n    });\r\n}\r\nfunction dispatch(state) {\r\n    var index = state.index, period = state.period, subscriber = state.subscriber;\r\n    subscriber.next(index);\r\n    if (subscriber.closed) {\r\n        return;\r\n    }\r\n    else if (period === -1) {\r\n        return subscriber.complete();\r\n    }\r\n    state.index = index + 1;\r\n    this.schedule(state, period);\r\n}\r\n//# sourceMappingURL=timer.js.map\r\n"]},"metadata":{},"sourceType":"module"}